<h1>View Booking</h1>

<div>
  <input type="number" [(ngModel)]="bookingId" placeholder="Enter Booking ID" />
  <button (click)="viewBooking()">View Booking</button>
</div>


<div *ngIf="booking">
  <h3>Booking Info:</h3>
  <ul>
    <li><strong>Booking ID:</strong> {{ booking.bookingId }}</li>
    <li><strong>Customer ID:</strong> {{ booking.customerId }}</li>
    <li><strong>Payment ID:</strong> {{ booking.payment.paymentId }}</li>
    <li><strong>Flight ID:</strong> {{ booking.flightId }}</li>
    <li><strong>Booking Date:</strong> {{ booking.bookingDate }}</li>
    <li><strong>Seat Number:</strong> {{ booking.seatNumber }}</li>
    <li><strong>Status:</strong> {{ booking.status }}</li>
  </ul>
</div>

<div>
  <h3>All Bookings</h3>
  <table border="1">
    <thead>
      <tr>
        <th>ID</th>
        <th>Customer ID</th>
        <th>Flight ID</th>
        <th>Booking Date</th>
        <th>Seat Number</th>
        <th>Status</th>
        <th>Payment ID</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let booking of bookings">
        <td>{{ booking.bookingId }}</td>
        <td>{{ booking.customerId }}</td>
        <td>{{ booking.flightId }}</td>
        <td>{{ booking.bookingDate }}</td>
        <td>{{ booking.seatNumber }}</td>
        <td>{{ booking.status }}</td>
        <td>{{ booking.payment?.paymentId }}</td>
        <td>
          <button (click)="editBooking(booking)">Edit</button>
          <button *ngIf="booking.bookingId !== undefined" (click)="deleteBooking(booking.bookingId!)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<div *ngIf="selectedBooking">
  <h3>Edit Booking</h3>
  <form (ngSubmit)="updateBooking()">
    <label for="bookingDate">Booking Date:</label><br>
    <input [(ngModel)]="selectedBooking.bookingDate" name="bookingDate" id="bookingDate" placeholder="YYYY-MM-DD" required /><br><br>

    <label for="seatNumber">Seat Number:</label><br>
    <input [(ngModel)]="selectedBooking.seatNumber" name="seatNumber" id="seatNumber" type="number" placeholder="Seat No" required /><br><br>

    <label for="status">Status:</label><br>
    <input [(ngModel)]="selectedBooking.status" name="status" id="status" type="text" placeholder="Status" required /><br><br>

    <label for="customerId">Customer ID:</label><br>
    <input [(ngModel)]="selectedBooking.customerId" name="customerId" id="customerId" type="number" placeholder="Customer Id" required /><br><br>

    <label for="flightId">Flight ID:</label><br>
    <input [(ngModel)]="selectedBooking.flightId" name="flightId" id="flightId" type="number" placeholder="Flight Id" required /><br><br>

    <label for="paymentId">Payment ID:</label><br>
    <input [(ngModel)]="selectedBooking.payment.paymentId" name="paymentId" id="paymentId" type="number" placeholder="Payment Id" required /><br><br>
    

    <button type="submit">Update</button>
    <!--<button type="button" (click)="selectedBooking = undefined">Cancel</button>-->
  </form>
</div>
